# notification_service

Сервис уведомлений для отправки сообщений пользователям через различные каналы связи.

## Swagger-документация

[api/v1/notification/openapi](http://127.0.0.1/api/v1/notification/openapi)

## Эндпоинты

### Уведомления (Notification)

#### Отправка уведомления
- **POST** `/api/v1/notification/`
- **Описание**: Отправка уведомления пользователю
- **Аутентификация**: Только внутренняя
- **Тело запроса**:
```json
{
  "to_id": "123e4567-e89b-12d3-a456-426614174000",
  "send_by": "email",
  "content_key": "welcome/123e4567-e89b-12d3-a456-426614174000",
  "content_data": "Добро пожаловать в нашу систему!"
}
```
- **Ответ**:
```json
{
  "detail": "notification sent"
}
```

#### Получение шаблона уведомления
- **GET** `/api/v1/notification/template/{notification_id}`
- **Описание**: Получение шаблона уведомления по ID
- **Аутентификация**: Только внутренняя
- **Параметры пути**: `notification_id` (string)
- **Ответ**:
```json
{
  "template": "Ваша подписка активна до {{ content }}."
}
```

#### Извещение об отправке уведомления
- **POST** `/api/v1/notification/sent`
- **Описание**: Подтверждение успешной отправки уведомления
- **Аутентификация**: Только внутренняя
- **Тело запроса**:
```json
{
  "notification_id": "123e4567-e89b-12d3-a456-426614174005"
}
```
- **Ответ**:
```json
{
  "detail": "OK"
}
```

## Аутентификация

Сервис поддерживает только внутреннюю аутентификацию для межсервисного взаимодействия:
- **Внутренняя аутентификация** - через заголовок `X-Internal-Auth`

## Каналы отправки

Сервис поддерживает следующие способы отправки уведомлений:
- **email** - отправка по электронной почте
- **websocket** - отправка через WebSocket соединение
